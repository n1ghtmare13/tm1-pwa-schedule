<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan Lekcji 3tb</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="assets/icon.png">
    <meta name="theme-color" content="#ffffff">

    <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getMessaging, getToken, onMessage } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-messaging.js";

    const firebaseConfig = {
        apiKey: "YOUR_API_KEY", // Zastąp swoim
        authDomain: "YOUR_AUTH_DOMAIN", // Zastąp swoim
        projectId: "YOUR_PROJECT_ID", // Zastąp swoim
        storageBucket: "YOUR_STORAGE_BUCKET", // Zastąp swoim
        messagingSenderId: "YOUR_MESSAGING_SENDER_ID",  // Zastąp swoim
        appId: "YOUR_APP_ID"  // Zastąp swoim
    };


    const app = initializeApp(firebaseConfig);
    const messaging = getMessaging(app);

    async function requestPermission() {
      const permission = await Notification.requestPermission();
        if (permission === 'granted') {
          console.log('Notification permission granted.');
            const token = await getToken(messaging, { vapidKey: 'YOUR_VAPID_KEY' });
              if (token){
                  console.log('FCM registration token:', token);
                  // Tutaj możesz wysłać token na swój serwer, aby móc go używać do wysyłania notyfikacji
              } else {
                console.log('Failed to get token');
              }

        } else {
            console.log('Unable to get permission to notify.');
        }
      }

      requestPermission();

      onMessage(messaging, (payload) => {
        console.log('Message received. ', payload);
        // Customize notification here
      });

      </script>
</head>
<body>
    <header>
        <h1>Plan Lekcji 3TB</h1>
    </header>
    <main>
        <div id="content">
            <div id="schedule-container"></div>
            <div id="substitutions-container"></div>
        </div>
        <div id="last-update"></div>
    </main>
    <footer>
        <p>© 2025 n1ghtmare13</p>
    </footer>
    <script src="script.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js');
            });
        }
    </script>
</body>
</html>
